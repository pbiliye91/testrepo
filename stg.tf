resource "azurerm_storage_account" "gen_storage_account" {
  name                          = "pubstg2013"
  resource_group_name           = "vishal-resource-group"
  location                      = "westeurope"
  account_tier                  = "Standard"
  account_replication_type      = "LRS"
  enable_https_traffic_only     = true
  public_network_access_enabled = true
  depends_on  = [azurerm_resource_group.my_resource_group]

  network_rules {
    default_action = "Deny"
    ip_rules       = [
"20.37.158.0/23",
"20.37.194.0/24",
"20.39.13.0/26",
"20.41.6.0/23",
"20.41.194.0/24",
"20.42.5.0/24",
"20.42.134.0/23",
"20.42.226.0/24",
"20.45.196.64/26",
"20.91.148.128/25",
"20.125.155.0/24",
"20.166.41.0/24",
"20.189.107.0/24",
"20.195.68.0/24",
"20.204.197.192/26",
"20.233.130.0/25",
"40.74.28.0/23",
"40.80.187.0/24",
"40.82.252.0/24",
"40.119.10.0/24",
"51.104.26.0/24",
"52.150.138.0/24",
"52.228.82.0/24",
"191.235.226.0/24",
"4.175.0.0/16",
"4.180.0.0/16",
"4.210.128.0/17",
"4.231.0.0/17",
"4.245.0.0/17",
"13.69.0.0/17",
"13.73.128.0/18",
"13.73.224.0/21",
"13.80.0.0/15",
"13.88.200.0/21",
"13.93.0.0/17",
"13.94.128.0/17",
"13.95.0.0/16",
"13.104.145.192/26",
"13.104.146.0/26",
"13.104.146.128/25",
"13.104.158.176/28",
"13.104.209.0/24",
"13.104.214.0/25",
"13.104.218.128/25",
"13.105.22.0/24",
"13.105.23.128/25",
"13.105.28.32/28",
"13.105.29.128/25",
"13.105.60.48/28",
"13.105.60.96/27",
"13.105.60.128/27",
"13.105.66.144/28",
"13.105.105.96/27",
"13.105.105.128/28",
"13.105.105.160/27",
"20.4.0.0/16",
"20.8.0.0/16",
"20.13.0.0/17",
"20.16.0.0/16",
"20.23.0.0/16",
"20.31.0.0/16",
"20.33.1.0/24",
"20.33.2.0/24",
"20.33.6.0/24",
"20.33.21.0/24",
"20.33.25.0/24",
"20.33.145.0/24",
"20.33.163.0/24",
"20.38.108.0/23",
"20.38.200.0/22",
"20.47.7.0/24",
"20.47.18.0/23",
"20.47.30.0/24",
"20.47.96.0/23",
"20.47.115.0/24",
"20.47.118.0/24",
"20.50.0.0/18",
"20.50.88.0/21",
"20.50.128.0/17",
"20.54.128.0/17",
"20.56.0.0/16",
"20.60.26.0/23",
"20.60.130.0/24",
"20.60.150.0/23",
"20.60.196.0/23",
"20.60.222.0/23",
"20.60.250.0/23",
"20.61.0.0/16",
"20.67.0.0/17",
"20.71.0.0/16",
"20.73.0.0/16",
"20.76.0.0/16",
"20.82.0.0/17",
"20.86.0.0/16",
"20.93.128.0/17",
"20.95.64.0/24",
"20.95.66.0/24",
"20.95.68.0/23",
"20.95.72.0/23",
"20.95.76.0/23",
"20.95.81.0/24",
"20.95.98.0/24",
"20.95.103.0/24",
"20.101.0.0/16",
"20.103.0.0/16",
"20.105.128.0/17",
"20.107.0.0/17",
"20.123.128.0/17",
"20.126.0.0/16",
"20.135.24.0/23",
"20.135.140.0/22",
"20.135.144.0/23",
"20.143.1.0/24",
"20.143.32.0/23",
"20.143.39.0/24",
"20.143.50.0/23",
"20.150.8.0/23",
"20.150.37.0/24",
"20.150.42.0/24",
"20.150.74.0/24",
"20.150.76.0/24",
"20.150.83.0/24",
"20.150.122.0/24",
"20.157.18.0/24",
"20.157.21.0/24",
"20.157.22.0/24",
"20.157.30.0/24",
"20.157.33.0/24",
"20.157.97.0/24",
"20.157.115.0/24",
"20.157.123.0/24",
"20.157.146.0/24",
"20.157.158.0/24",
"20.157.170.0/24",
"20.157.186.0/24",
"20.157.212.0/24",
"20.157.221.0/24",
"20.157.223.0/24",
"20.157.230.0/24",
"20.157.245.0/24",
"20.160.0.0/16",
"20.190.137.0/24",
"20.190.160.0/24",
"20.202.2.0/24",
"20.202.12.0/22",
"20.202.16.0/22",
"20.202.140.0/24",
"20.202.150.0/24",
"20.202.152.0/24",
"20.202.154.0/24",
"20.202.156.0/24",
"20.202.158.0/24",
"20.202.160.0/24",
"20.202.162.0/24",
"20.202.164.0/24",
"20.202.166.0/24",
"20.202.168.0/24",
"20.209.10.0/23",
"20.209.48.0/23",
"20.209.72.0/23",
"20.209.76.0/23",
"20.209.108.0/23",
"20.209.192.0/23",
"20.209.230.0/23",
"20.224.0.0/16",
"20.229.0.0/16",
"20.234.128.0/17",
"20.238.128.0/17",
"23.97.128.0/17",
"23.98.46.0/24",
"23.100.0.0/20",
"23.101.64.0/20",
"40.64.144.32/27",
"40.64.172.128/25",
"40.67.192.0/19",
"40.68.0.0/16",
"40.74.0.0/18",
"40.78.210.0/24",
"40.79.205.192/27",
"40.79.205.224/28",
"40.79.206.0/27",
"40.82.92.0/22",
"40.87.184.0/22",
"40.90.17.64/27",
"40.90.18.192/26",
"40.90.20.128/25",
"40.90.21.0/25",
"40.90.130.0/27",
"40.90.133.0/27",
"40.90.134.64/26",
"40.90.134.128/26",
"40.90.138.0/27",
"40.90.141.32/27",
"40.90.141.160/27",
"40.90.142.224/28",
"40.90.144.192/27",
"40.90.145.192/27",
"40.90.146.16/28",
"40.90.146.128/27",
"40.90.150.128/25",
"40.90.157.64/26",
"40.90.159.0/24",
"40.91.28.0/22",
"40.91.192.0/18",
"40.93.65.0/24",
"40.101.2.192/26",
"40.101.3.0/25",
"40.101.20.64/26",
"40.101.20.128/25",
"40.112.36.128/25",
"40.112.37.0/26",
"40.112.38.192/26",
"40.112.96.0/19",
"40.113.96.0/19",
"40.113.128.0/18",
"40.114.128.0/17",
"40.115.0.0/18",
"40.118.0.0/17",
"40.119.128.0/19",
"40.123.140.0/22",
"40.123.180.0/22",
"40.126.9.0/24",
"40.126.32.0/24",
"51.105.96.0/19",
"51.105.128.0/17",
"51.124.0.0/16",
"51.136.0.0/16",
"51.137.0.0/17",
"51.137.192.0/18",
"51.138.0.0/17",
"51.144.0.0/16",
"51.145.128.0/17",
"52.101.69.0/24",
"52.101.70.0/23",
"52.101.72.0/23",
"52.102.161.0/24",
"52.103.33.0/24",
"52.103.161.0/24",
"52.108.24.0/21",
"52.108.56.0/21",
"52.108.80.0/24",
"52.108.108.0/23",
"52.108.110.0/24",
"52.109.88.0/22",
"52.111.243.0/24",
"52.112.14.0/23",
"52.112.17.0/24",
"52.112.18.0/23",
"52.112.22.0/24",
"52.112.83.0/24",
"52.112.97.0/24",
"52.112.98.0/23",
"52.112.102.0/24",
"52.112.110.0/24",
"52.112.124.0/24",
"52.112.144.0/20",
"52.112.197.0/24",
"52.112.216.0/21",
"52.112.228.128/25",
"52.112.233.0/24",
"52.112.237.0/24",
"52.112.238.0/24",
"52.113.9.0/24",
"52.113.12.0/24",
"52.113.37.0/24",
"52.113.38.0/23",
"52.113.69.0/24",
"52.113.83.0/24",
"52.113.85.0/24",
"52.113.86.0/24",
"52.113.130.0/24",
"52.113.144.0/21",
"52.113.199.0/24",
"52.114.72.0/22",
"52.114.241.0/24",
"52.114.242.0/24",
"52.114.252.0/22",
"52.115.226.0/23",
"52.115.228.0/23",
"52.120.128.0/21",
"52.120.208.0/20",
"52.121.24.0/21",
"52.121.64.0/20",
"52.122.20.0/22",
"52.122.96.0/20",
"52.122.112.0/21",
"52.123.7.0/24",
"52.123.133.0/24",
"52.123.134.0/23",
"52.123.195.0/24",
"52.125.140.0/23",
"52.136.192.0/18",
"52.137.0.0/18",
"52.142.192.0/18",
"52.143.0.0/18",
"52.143.194.0/24",
"52.143.208.0/24",
"52.148.192.0/18",
"52.149.64.0/18",
"52.157.64.0/18",
"52.157.128.0/17",
"52.166.0.0/16",
"52.174.0.0/16",
"52.178.0.0/17",
"52.232.0.0/17",
"52.232.147.0/24",
"52.233.128.0/17",
"52.236.128.0/17",
"52.239.140.0/22",
"52.239.212.0/23",
"52.239.242.0/23",
"52.245.48.0/22",
"52.245.124.0/22",
"65.52.128.0/19",
"68.219.160.0/19",
"74.234.128.0/17",
"98.64.0.0/16",
"98.71.128.0/17",
"104.40.128.0/17",
"104.44.89.160/27",
"104.44.90.192/27",
"104.44.93.0/27",
"104.44.93.192/27",
"104.44.95.80/28",
"104.44.95.96/28",
"104.45.0.0/18",
"104.45.64.0/20",
"104.46.32.0/19",
"104.47.128.0/18",
"104.47.216.64/26",
"104.214.192.0/18",
"108.141.0.0/16",
"108.142.0.0/15",
"137.116.192.0/19",
"137.117.128.0/17",
"151.206.49.16/28",
"151.206.49.32/27",
"151.206.73.0/24",
"151.206.74.0/24",
"151.206.75.0/25",
"151.206.75.128/26",
"157.55.8.64/26",
"157.55.8.144/28",
"157.56.117.64/27",
"168.61.56.0/21",
"168.63.0.0/19",
"168.63.96.0/19",
"172.201.0.0/16",
"191.233.64.0/18",
"191.237.232.0/22",
"191.239.200.0/22",
"193.149.80.0/21",
"213.199.128.0/20",
"213.199.180.32/28",
"213.199.180.96/27",
"213.199.180.192/27",
"213.199.183.0/24"]
  }

  blob_properties {
    #Specifies the number of days that the container should be retained.
    container_delete_retention_policy {
      days = 7
    }
    #Specifies the number of days that the blob should be retained
    delete_retention_policy {
      days = 7
    }
  }
}

resource "azurerm_storage_container" "gen_stg_acc_container_1" {
  name                  = "tblc-sb-cnt-dev-we-1"
  storage_account_name  = azurerm_storage_account.gen_storage_account.name
  container_access_type = "private"
}

resource "azurerm_storage_share" "fileshare" {
  name                 = "bulkfilesdev"
  storage_account_name = azurerm_storage_account.gen_storage_account.name
  quota                = 50
}

resource "azurerm_storage_share_directory" "file_share_directories" {
  share_name           = "bulkfilesdev"
  storage_account_name = azurerm_storage_account.gen_storage_account.name
  name                 = "errors"
  depends_on           = [azurerm_storage_share.fileshare]
}

resource "azurerm_storage_share_directory" "file_share_directories_new" {
  share_name           = "bulkfilesdev"
  storage_account_name = azurerm_storage_account.gen_storage_account.name
  name                 = "errorsnew"
  depends_on           = [azurerm_storage_share.fileshare]
}

resource "azurerm_storage_share_directory" "file_share_directories_new1" {
  share_name           = "bulkfilesdev"
  storage_account_name = azurerm_storage_account.gen_storage_account.name
  name                 = "errorsnew1"
  depends_on           = [azurerm_storage_share.fileshare]
}